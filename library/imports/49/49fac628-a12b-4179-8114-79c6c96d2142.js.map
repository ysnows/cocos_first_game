{"version":3,"sources":["../../../../assets/scripts/assets/scripts/Game.js"],"names":["cc","Class","extends","Component","properties","score","starPrefab","default","type","Prefab","ground","Node","player","scoreDisplay","Label","scoreAudio","url","AudioClip","getNewStarPosition","randY","groundY","random0To1","getComponent","jumpHeight","maxWidth","node","width","randX","randomMinus1To1","p","spawnNewStar","newStar","instantiate","addChild","newStarPosition","setPosition","game","gainScore","string","toString","audioEngine","play","gameOver","stopAllActions","director","loadScene","onLoad","y","height"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAC,eAAO,CAjBC;AAkBRC,oBAAY;AACRC,qBAAS,IADD;AAERC,kBAAMR,GAAGS;AAFD,SAlBJ;AAsBRC,gBAAQ;AACJH,qBAAS,IADL;AAEJC,kBAAMR,GAAGW;AAFL,SAtBA;AA0BRC,gBAAQ;AACJL,qBAAS,IADL;AAEJC,kBAAMR,GAAGW;AAFL,SA1BA;AA8BRE,sBAAc;AACVN,qBAAS,IADC;AAEVC,kBAAMR,GAAGc;AAFC,SA9BN;AAkCRC,oBAAY;AACRR,qBAAS,IADD;AAERS,iBAAKhB,GAAGiB;AAFA;AAlCJ,KAHP;;AA2CL;;AAEA;;;AAGAC,wBAAoB,8BAAY;AAC5B,YAAIC,QAAQ,KAAKC,OAAL,GAAepB,GAAGqB,UAAH,KAAkB,KAAKT,MAAL,CAAYU,YAAZ,CAAyB,QAAzB,EAAmCC,UAApE,GAAiF,EAA7F;AACA,YAAIC,WAAW,KAAKC,IAAL,CAAUC,KAAV,GAAkB,CAAjC;AACA,YAAMC,QAAQ3B,GAAG4B,eAAH,KAAuBJ,QAArC;AACA,eAAOxB,GAAG6B,CAAH,CAAKF,KAAL,EAAYR,KAAZ,CAAP;AACH,KArDI;;AAuDL;;;AAGAW,kBAAc,wBAAY;AACtB;AACA,YAAMC,UAAU/B,GAAGgC,WAAH,CAAe,KAAK1B,UAApB,CAAhB;AACA;AACA,aAAKmB,IAAL,CAAUQ,QAAV,CAAmBF,OAAnB;AACA;AACA,YAAIG,kBAAkB,KAAKhB,kBAAL,EAAtB;AACAa,gBAAQI,WAAR,CAAoBD,eAApB;AACA;AACAH,gBAAQT,YAAR,CAAqB,MAArB,EAA6Bc,IAA7B,GAAoC,IAApC;AACH,KApEI;AAqEL;;;AAGAC,eAAW,qBAAY;AACnB,aAAKhC,KAAL,IAAc,CAAd;AACA,aAAKQ,YAAL,CAAkByB,MAAlB,GAA2B,YAAY,KAAKjC,KAAL,CAAWkC,QAAX,EAAvC;AACAvC,WAAGwC,WAAH,CAAeC,IAAf,CAAoB,KAAK1B,UAAzB,EAAqC,KAArC,EAA4C,CAA5C;AACH,KA5EI;AA6EL;;;AAGA2B,cAAU,oBAAY;AAClB,aAAK9B,MAAL,CAAY+B,cAAZ;AACA3C,WAAG4C,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,KAnFI;AAoFLC,UApFK,oBAoFI;AACL,aAAK1B,OAAL,GAAe,KAAKV,MAAL,CAAYqC,CAAZ,GAAgB,KAAKrC,MAAL,CAAYsC,MAAZ,GAAqB,CAApD;AACA,aAAKlB,YAAL;AACH;;AAEL;;AAzFS,CAAT","file":"Game.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n\n        score: 0,\n        starPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        ground: {\n            default: null,\n            type: cc.Node\n        },\n        player: {\n            default: null,\n            type: cc.Node\n        },\n        scoreDisplay: {\n            default: null,\n            type: cc.Label\n        },\n        scoreAudio: {\n            default: null,\n            url: cc.AudioClip\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    /**\n     *设置新生成星星的位置\n     */\n    getNewStarPosition: function () {\n        let randY = this.groundY + cc.random0To1() * this.player.getComponent(\"Player\").jumpHeight + 50;\n        let maxWidth = this.node.width / 2;\n        const randX = cc.randomMinus1To1() * maxWidth;\n        return cc.p(randX, randY);\n    },\n\n    /**\n     * 生产星星\n     */\n    spawnNewStar: function () {\n        //1. 从prefab中实例化\n        const newStar = cc.instantiate(this.starPrefab);\n        //2. 添加到当前的node中\n        this.node.addChild(newStar);\n        //3. 设定newStar的位置\n        var newStarPosition = this.getNewStarPosition();\n        newStar.setPosition(newStarPosition);\n        //4. 将game引用传入star中\n        newStar.getComponent('Star').game = this\n    },\n    /**\n     * 获取积分\n     */\n    gainScore: function () {\n        this.score += 1;\n        this.scoreDisplay.string = \"Score: \" + this.score.toString();\n        cc.audioEngine.play(this.scoreAudio, false, 1);\n    },\n    /**\n     * 游戏结束\n     */\n    gameOver: function () {\n        this.player.stopAllActions();\n        cc.director.loadScene(\"game\")\n    },\n    onLoad() {\n        this.groundY = this.ground.y + this.ground.height / 2;\n        this.spawnNewStar();\n    }\n\n// update (dt) {},\n})\n;\n"]}